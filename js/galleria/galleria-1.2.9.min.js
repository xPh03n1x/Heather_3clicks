!function(t){var e,i,a,n,o=this,r=o.document,s=t(r),l=t(o),c=Array.prototype,h=!0,u=!1,d=navigator.userAgent.toLowerCase(),p=o.location.hash.replace(/#\//,""),g=function(){},f=function(){return!1},m=function(){var t=3,i=r.createElement("div"),a=i.getElementsByTagName("i");do{i.innerHTML="\x3c!--[if gt IE "+ ++t+"]><i></i><![endif]--\x3e"}while(a[0]);return t>4?t:e}(),y=function(){return{html:r.documentElement,body:r.body,head:r.getElementsByTagName("head")[0],title:r.title}},v=o.parent!==o.self,b="data ready thumbnail loadstart loadfinish image play pause progress fullscreen_enter fullscreen_exit idle_enter idle_exit rescale lightbox_open lightbox_close lightbox_image",_=(n=[],t.each(b.split(" "),function(t,e){n.push(e),/_/.test(e)&&n.push(e.replace(/_/g,""))}),n),w=function(e){var i;return"object"!=typeof e?e:(t.each(e,function(a,n){/^[a-z]+_/.test(a)&&(i="",t.each(a.split("_"),function(t,e){i+=t>0?e.substr(0,1).toUpperCase()+e.substr(1):e}),e[i]=n,delete e[a])}),e)},x=function(e){return t.inArray(e,_)>-1?Galleria[e.toUpperCase()]:e},T={youtube:{reg:/https?:\/\/(?:[a-zA_Z]{2,3}.)?(?:youtube\.com\/watch\?)((?:[\w\d\-\_\=]+&amp;(?:amp;)?)*v(?:&lt;[A-Z]+&gt;)?=([0-9a-zA-Z\-\_]+))/i,embed:function(t){return"http://www.youtube.com/embed/"+t},getThumb:function(e,i,a){a=a||g,t.getJSON(o.location.protocol+"//gdata.youtube.com/feeds/api/videos/"+e+"?v=2&alt=json-in-script&callback=?",function(t){try{i(t.entry.media$group.media$thumbnail[0].url)}catch(t){a()}}).error(a)}},vimeo:{reg:/https?:\/\/(?:www\.)?(vimeo\.com)\/(?:hd#)?([0-9]+)/i,embed:function(t){return"http://player.vimeo.com/video/"+t},getThumb:function(e,i,a){a=a||g,t.getJSON("http://vimeo.com/api/v2/video/"+e+".json?callback=?",function(t){try{i(t[0].thumbnail_medium)}catch(t){a()}}).error(a)}},dailymotion:{reg:/https?:\/\/(?:www\.)?(dailymotion\.com)\/video\/([^_]+)/,embed:function(t){return"http://www.dailymotion.com/embed/video/"+t},getThumb:function(e,i,a){a=a||g,t.getJSON("https://api.dailymotion.com/video/"+e+"?fields=thumbnail_medium_url&callback=?",function(t){try{i(t.thumbnail_medium_url)}catch(t){a()}}).error(a)}}},k=function(t){var e;for(var i in T)if((e=t&&t.match(T[i].reg))&&e.length)return{id:e[2],provider:i};return!1},G={support:(a=y().html,!v&&(a.requestFullscreen||a.mozRequestFullScreen||a.webkitRequestFullScreen)),callback:g,enter:function(t,e,i){this.instance=t,this.callback=e||g,(i=i||y().html).requestFullscreen?i.requestFullscreen():i.mozRequestFullScreen?i.mozRequestFullScreen():i.webkitRequestFullScreen&&i.webkitRequestFullScreen()},exit:function(t){this.callback=t||g,r.exitFullscreen?r.exitFullscreen():r.mozCancelFullScreen?r.mozCancelFullScreen():r.webkitCancelFullScreen&&r.webkitCancelFullScreen()},instance:null,listen:function(){if(this.support){var t=function(){if(G.instance){var t=G.instance._fullscreen;r.fullscreen||r.mozFullScreen||r.webkitIsFullScreen?t._enter(G.callback):t._exit(G.callback)}};r.addEventListener("fullscreenchange",t,!1),r.addEventListener("mozfullscreenchange",t,!1),r.addEventListener("webkitfullscreenchange",t,!1)}}},C=[],I=[],S=!1,A=!1,E=[],M=function(e){Galleria.theme=e,t.each(E,function(t,e){e._initialized||e._init.call(e)}),E=[]},$=function(){return{clearTimer:function(e){t.each(Galleria.get(),function(){this.clearTimer(e)})},addTimer:function(e){t.each(Galleria.get(),function(){this.addTimer(e)})},array:function(t){return c.slice.call(t,0)},create:function(t,e){e=e||"div";var i=r.createElement(e);return i.className=t,i},removeFromArray:function(e,i){return t.each(e,function(t,a){if(a==i)return e.splice(t,1),!1}),e},getScriptPath:function(e){var i=(e=e||t("script:last").attr("src")).split("/");return 1==i.length?"":(i.pop(),i.join("/")+"/")},animate:(k=function(t){var e,i="transition WebkitTransition MozTransition OTransition".split(" ");if(o.opera)return!1;for(e=0;i[e];e++)if(void 0!==t[i[e]])return i[e];return!1}((r.body||r.documentElement).style),G={MozTransition:"transitionend",OTransition:"oTransitionEnd",WebkitTransition:"webkitTransitionEnd",transition:"transitionend"}[k],C={_default:[.25,.1,.25,1],galleria:[.645,.045,.355,1],galleriaIn:[.55,.085,.68,.53],galleriaOut:[.25,.46,.45,.94],ease:[.25,0,.25,1],linear:[.25,.25,.75,.75],"ease-in":[.42,0,1,1],"ease-out":[0,0,.58,1],"ease-in-out":[.42,0,.58,1]},I=function(e,i,a){var n={};a=a||"transition",t.each("webkit moz ms o".split(" "),function(){n["-"+this+"-"+a]=i}),e.css(n)},S=function(t){I(t,"none","transition"),Galleria.WEBKIT&&Galleria.TOUCH&&(I(t,"translate3d(0,0,0)","transform"),t.data("revert")&&(t.css(t.data("revert")),t.data("revert",null)))},function(e,i,a){if(a=t.extend({duration:400,complete:g,stop:!1},a),e=t(e),!a.duration)return e.css(i),void a.complete.call(e[0]);k?(a.stop&&(e.unbind(G),S(e)),p=!1,t.each(i,function(t,i){T=e.css(t),$.parseValue(T)!=$.parseValue(i)&&(p=!0),e.css(t,T)}),p?(v=[],b=a.easing in C?C[a.easing]:C._default,_=" "+a.duration+"ms cubic-bezier("+b.join(",")+")",o.setTimeout(function(e,i,n,o){return function(){e.one(i,function(t){return function(){S(t),a.complete.call(t[0])}}(e)),Galleria.WEBKIT&&Galleria.TOUCH&&(w={},x=[0,0,0],t.each(["left","top"],function(t,i){i in n&&(x[t]=$.parseValue(n[i])-$.parseValue(e.css(i))+"px",w[i]=n[i],delete n[i])}),(x[0]||x[1])&&(e.data("revert",w),v.push("-webkit-transform"+o),I(e,"translate3d("+x.join(",")+")","transform"))),t.each(n,function(t,e){v.push(t+o)}),I(e,v.join(",")),e.css(n)}}(e,G,i,_),2)):o.setTimeout(function(){a.complete.call(e[0])},a.duration)):e.animate(i,a)}),removeAlpha:function(t){if(m<9&&t){var e=t.style,i=t.currentStyle,a=i&&i.filter||e.filter||"";/alpha/.test(a)&&(e.filter=a.replace(/alpha\([^)]*\)/i,""))}},forceStyles:function(e,i){(e=t(e)).attr("style")&&e.data("styles",e.attr("style")).removeAttr("style"),e.css(i)},revertStyles:function(){t.each($.array(arguments),function(e,i){(i=t(i)).removeAttr("style"),i.attr("style",""),i.data("styles")&&i.attr("style",i.data("styles")).data("styles",null)})},moveOut:function(t){$.forceStyles(t,{position:"absolute",left:-1e4})},moveIn:function(){$.revertStyles.apply($,$.array(arguments))},elem:function(e){return e instanceof t?{$:e,dom:e[0]}:{$:t(e),dom:e}},hide:function(t,e,i){i=i||g;var a=$.elem(t),n=a.$;t=a.dom,n.data("opacity")||n.data("opacity",n.css("opacity"));var o={opacity:0};if(e){var r=m<9&&t?function(){$.removeAlpha(t),t.style.visibility="hidden",i.call(t)}:i;$.animate(t,o,{duration:e,complete:r,stop:!0})}else m<9&&t?($.removeAlpha(t),t.style.visibility="hidden"):n.css(o)},show:function(t,e,i){i=i||g;var a=$.elem(t),n=a.$;t=a.dom;var o={opacity:parseFloat(n.data("opacity"))||1};if(e){m<9&&(n.css("opacity",0),t.style.visibility="visible");var r=m<9&&t?function(){1==o.opacity&&$.removeAlpha(t),i.call(t)}:i;$.animate(t,o,{duration:e,complete:r,stop:!0})}else m<9&&1==o.opacity&&t?($.removeAlpha(t),t.style.visibility="visible"):n.css(o)},optimizeTouch:(l={},h=function(e){e.preventDefault(),l=t.extend({},e,!0)},u=function(){this.evt=l},d=function(){this.handler.call(i,this.evt)},function(e){t(e).bind("touchend",function(e){for(i=e.target,s=!0;i.parentNode&&i!=e.currentTarget&&s;)a=t(i).data("events"),n=t(i).data("fakes"),a&&"click"in a?(s=!1,e.preventDefault(),t(i).click(h).click(),a.click.pop(),t.each(a.click,u),t(i).data("fakes",a.click),delete a.click):n&&(s=!1,e.preventDefault(),t.each(n,d)),i=i.parentNode})}),wait:function(e){e=t.extend({until:f,success:g,error:function(){Galleria.raise("Could not complete wait function.")},timeout:3e3},e);var i,a,n=$.timestamp(),r=function(){return a=$.timestamp(),i=a-n,e.until(i)?(e.success(),!1):"number"==typeof e.timeout&&a>=n+e.timeout?(e.error(),!1):void o.setTimeout(r,10)};o.setTimeout(r,10)},toggleQuality:function(t,e){7!==m&&8!==m||!t||"IMG"!=t.nodeName.toUpperCase()||(void 0===e&&(e="nearest-neighbor"===t.style.msInterpolationMode),t.style.msInterpolationMode=e?"bicubic":"nearest-neighbor")},insertStyleTag:function(e,i){if(!i||!t("#"+i).length){var a=r.createElement("style");if(i&&(a.id=i),y().head.appendChild(a),a.styleSheet)a.styleSheet.cssText=e;else{var n=r.createTextNode(e);a.appendChild(n)}}},loadScript:function(e,i){var a=!1,n=t("<script>").attr({src:e,async:!0}).get(0);n.onload=n.onreadystatechange=function(){a||this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(a=!0,n.onload=n.onreadystatechange=null,"function"==typeof i&&i.call(this,this))},y().head.appendChild(n)},parseValue:function(t){if("number"==typeof t)return t;if("string"==typeof t){var e=t.match(/\-?\d|\./g);return e&&e.constructor===Array?1*e.join(""):0}return 0},timestamp:function(){return(new Date).getTime()},loadCSS:function(i,a,n){var o,s;if(t("link[rel=stylesheet]").each(function(){if(new RegExp(i).test(this.href))return o=this,!1}),"function"==typeof a&&(n=a,a=e),n=n||g,o)return n.call(o,o),o;if(s=r.styleSheets.length,t("#"+a).length)t("#"+a).attr("href",i),s--;else{o=t("<link>").attr({rel:"stylesheet",href:i,id:a}).get(0);var l=t('link[rel="stylesheet"], style');if(l.length?l.get(0).parentNode.insertBefore(o,l[0]):y().head.appendChild(o),m&&s>=31)return void Galleria.raise("You have reached the browser stylesheet limit (31)",!0)}if("function"==typeof n){var c=t("<s>").attr("id","galleria-loader").hide().appendTo(y().body);$.wait({until:function(){return 1==c.height()},success:function(){c.remove(),n.call(o,o)},error:function(){c.remove(),Galleria.raise("Theme CSS could not load after 20 sec. "+(Galleria.QUIRK?"Your browser is in Quirks Mode, please add a correct doctype.":"Please download the latest theme at http://galleria.io/customer/."),!0)},timeout:5e3})}return o}};var i,a,n,s,l,h,u,d,p,v,b,_,w,x,T,k,G,C,I,S}(),D=(i=function(e,i,a,n){var o,r=this.getOptions("easing"),s=this.getStageWidth(),l={left:s*(e.rewind?-1:1)},c={left:0};a?(l.opacity=0,c.opacity=1):l.opacity=1,t(e.next).css(l),$.animate(e.next,c,{duration:e.speed,complete:(o=t(e.next).add(e.prev),function(){i(),o.css({left:0})}),queue:!1,easing:r}),n&&(e.rewind=!e.rewind),e.prev&&(l={left:0},c={left:s*(e.rewind?1:-1)},a&&(l.opacity=1,c.opacity=0),t(e.prev).css(l),$.animate(e.prev,c,{duration:e.speed,queue:!1,easing:r,complete:function(){t(this).css("opacity",0)}}))},{active:!1,init:function(t,e,i){D.effects.hasOwnProperty(t)&&D.effects[t].call(this,e,i)},effects:{fade:function(e,i){t(e.next).css({opacity:0,left:0}),$.animate(e.next,{opacity:1},{duration:e.speed,complete:i}),e.prev&&(t(e.prev).css("opacity",1).show(),$.animate(e.prev,{opacity:0},{duration:e.speed}))},flash:function(e,i){t(e.next).css({opacity:0,left:0}),e.prev?$.animate(e.prev,{opacity:0},{duration:e.speed/2,complete:function(){$.animate(e.next,{opacity:1},{duration:e.speed,complete:i})}}):$.animate(e.next,{opacity:1},{duration:e.speed,complete:i})},pulse:function(e,i){e.prev&&t(e.prev).hide(),t(e.next).css({opacity:0,left:0}).show(),$.animate(e.next,{opacity:1},{duration:e.speed,complete:i})},slide:function(t,e){i.apply(this,$.array(arguments))},fadeslide:function(t,e){i.apply(this,$.array(arguments).concat([!0]))},doorslide:function(t,e){i.apply(this,$.array(arguments).concat([!1,!0]))}}});G.listen(),Galleria=function(){var i=this;this._options={},this._playing=!1,this._playtime=5e3,this._active=null,this._queue={length:0},this._data=[],this._dom={},this._thumbnails=[],this._layers=[],this._initialized=!1,this._firstrun=!1,this._stageWidth=0,this._stageHeight=0,this._target=e,this._binds=[],this._id=parseInt(1e4*Math.random(),10);t.each("container stage images image-nav image-nav-left image-nav-right info info-text info-title info-description thumbnails thumbnails-list thumbnails-container thumb-nav-left thumb-nav-right loader counter tooltip".split(" "),function(t,e){i._dom[e]=$.create("galleria-"+e)}),t.each("current total".split(" "),function(t,e){i._dom[e]=$.create("galleria-"+e,"span")});var a=this._keyboard={keys:{UP:38,DOWN:40,LEFT:37,RIGHT:39,RETURN:13,ESCAPE:27,BACKSPACE:8,SPACE:32},map:{},bound:!1,press:function(t){var e=t.keyCode||t.which;e in a.map&&"function"==typeof a.map[e]&&a.map[e].call(i,t)},attach:function(t){var e,i;for(e in t)t.hasOwnProperty(e)&&((i=e.toUpperCase())in a.keys?a.map[a.keys[i]]=t[e]:a.map[i]=t[e]);a.bound||(a.bound=!0,s.bind("keydown",a.press))},detach:function(){a.bound=!1,a.map={},s.unbind("keydown",a.press)}},n=this._controls={0:e,1:e,active:0,swap:function(){n.active=n.active?0:1},getActive:function(){return n[n.active]},getNext:function(){return n[1-n.active]}},c=this._carousel={next:i.$("thumb-nav-right"),prev:i.$("thumb-nav-left"),width:0,current:0,max:0,hooks:[],update:function(){var e=0,a=0,n=[0];t.each(i._thumbnails,function(i,o){o.ready&&(e+=o.outerWidth||t(o.container).outerWidth(!0),n[i+1]=e,a=Math.max(a,o.outerHeight||t(o.container).outerHeight(!0)))}),i.$("thumbnails").css({width:e,height:a}),c.max=e,c.hooks=n,c.width=i.$("thumbnails-list").width(),c.setClasses(),i.$("thumbnails-container").toggleClass("galleria-carousel",e>c.width),c.width=i.$("thumbnails-list").width()},bindControls:function(){var t;c.next.bind("click",function(e){if(e.preventDefault(),"auto"===i._options.carouselSteps){for(t=c.current;t<c.hooks.length;t++)if(c.hooks[t]-c.hooks[c.current]>c.width){c.set(t-2);break}}else c.set(c.current+i._options.carouselSteps)}),c.prev.bind("click",function(e){if(e.preventDefault(),"auto"===i._options.carouselSteps)for(t=c.current;t>=0;t--){if(c.hooks[c.current]-c.hooks[t]>c.width){c.set(t+2);break}if(0===t){c.set(0);break}}else c.set(c.current-i._options.carouselSteps)})},set:function(t){for(t=Math.max(t,0);c.hooks[t-1]+c.width>=c.max&&t>=0;)t--;c.current=t,c.animate()},getLast:function(t){return(t||c.current)-1},follow:function(t){if(0!==t&&t!==c.hooks.length-2){for(var e=c.current;c.hooks[e]-c.hooks[c.current]<c.width&&e<=c.hooks.length;)e++;t-1<c.current?c.set(t-1):t+2>e&&c.set(t-e+c.current+2)}else c.set(t)},setClasses:function(){c.prev.toggleClass("disabled",!c.current),c.next.toggleClass("disabled",c.hooks[c.current]+c.width>=c.max)},animate:function(t){c.setClasses();var e=-1*c.hooks[c.current];isNaN(e)||$.animate(i.get("thumbnails"),{left:e},{duration:i._options.carouselSpeed,easing:i._options.easing,queue:!1})}},h=this._tooltip={initialized:!1,open:!1,timer:"tooltip"+i._id,swapTimer:"swap"+i._id,init:function(){h.initialized=!0;$.insertStyleTag(".galleria-tooltip{padding:3px 8px;max-width:50%;background:#ffe;color:#000;z-index:3;position:absolute;font-size:11px;line-height:1.3;opacity:0;box-shadow:0 0 2px rgba(0,0,0,.4);-moz-box-shadow:0 0 2px rgba(0,0,0,.4);-webkit-box-shadow:0 0 2px rgba(0,0,0,.4);}","galleria-tooltip"),i.$("tooltip").css({opacity:.8,visibility:"visible",display:"none"})},move:function(t){var e=i.getMousePosition(t).x,a=i.getMousePosition(t).y,n=i.$("tooltip"),o=e,r=a,s=n.outerHeight(!0)+1,l=n.outerWidth(!0),c=s+15,h=i.$("container").width()-l-2,u=i.$("container").height()-s-2;isNaN(o)||isNaN(r)||(o+=10,r-=s+8,o=Math.max(0,Math.min(h,o)),r=Math.max(0,Math.min(u,r)),a<c&&(r=c),n.css({left:o,top:r}))},bind:function(e,a){if(!Galleria.TOUCH){h.initialized||h.init();var n=function(){i.$("container").unbind("mousemove",h.move),i.clearTimer(h.timer),i.$("tooltip").stop().animate({opacity:0},200,function(){i.$("tooltip").hide(),i.addTimer(h.swapTimer,function(){h.open=!1},1e3)})},o=function(e,a){h.define(e,a),t(e).hover(function(){i.clearTimer(h.swapTimer),i.$("container").unbind("mousemove",h.move).bind("mousemove",h.move).trigger("mousemove"),h.show(e),i.addTimer(h.timer,function(){i.$("tooltip").stop().show().animate({opacity:1}),h.open=!0},h.open?0:500)},n).click(n)};"string"==typeof a?o(e in i._dom?i.get(e):e,a):t.each(e,function(t,e){o(i.get(t),e)})}},show:function(e){var a=(e=t(e in i._dom?i.get(e):e)).data("tt"),n=function(t){var i;o.setTimeout((i=t,function(){h.move(i)}),10),e.unbind("mouseup",n)};(a="function"==typeof a?a():a)&&(i.$("tooltip").html(a.replace(/\s/,"&#160;")),e.bind("mouseup",n))},define:function(e,a){if("function"!=typeof a){var n=a;a=function(){return n}}e=t(e in i._dom?i.get(e):e).data("tt",a),h.show(e)}},u=this._fullscreen={scrolled:0,crop:e,active:!1,keymap:i._keyboard.map,parseCallback:function(e,a){return D.active?function(){"function"==typeof e&&e.call(i);var n=i._controls.getActive(),o=i._controls.getNext();i._scaleImage(o),i._scaleImage(n),a&&i._options.trueFullscreen&&t(n.container).add(o.container).trigger("transitionend")}:e},enter:function(t){t=u.parseCallback(t,!0),i._options.trueFullscreen&&G.support?(u.active=!0,$.forceStyles(i.get("container"),{width:"100%",height:"100%"}),i.rescale(),Galleria.MAC?!Galleria.WEBKIT||Galleria.SAFARI&&/version\/[1-5]/.test(d)?(i.$("stage").css("opacity",0),o.setTimeout(function(){u.scale(),i.$("stage").css("opacity",1)},4)):(i.$("container").css("opacity",0).addClass("fullscreen"),o.setTimeout(function(){u.scale(),i.$("container").css("opacity",1)},50)):i.$("container").addClass("fullscreen"),l.resize(u.scale),G.enter(i,t,i.get("container"))):(u.scrolled=l.scrollTop(),o.scrollTo(0,0),u._enter(t))},_enter:function(a){var n,s,c,h;u.active=!0,v&&(u.iframe=(s=r.referrer,c=r.createElement("a"),h=o.location,c.href=s,c.protocol!=h.protocol||c.hostname!=h.hostname||c.port!=h.port?(Galleria.raise("Parent fullscreen not available. Iframe protocol, domains and ports must match."),!1):(u.pd=o.parent.document,t(u.pd).find("iframe").each(function(){if((this.contentDocument||this.contentWindow.document)===r)return n=this,!1}),n))),$.hide(i.getActiveImage()),v&&u.iframe&&(u.iframe.scrolled=t(o.parent).scrollTop(),o.parent.scrollTo(0,0));var d=i.getData(),p=i._options,g=!i._options.trueFullscreen||!G.support,f={height:"100%",overflow:"hidden",margin:0,padding:0};if(g&&(i.$("container").addClass("fullscreen"),$.forceStyles(i.get("container"),{position:"fixed",top:0,left:0,width:"100%",height:"100%",zIndex:1e4}),$.forceStyles(y().html,f),$.forceStyles(y().body,f)),v&&u.iframe&&($.forceStyles(u.pd.documentElement,f),$.forceStyles(u.pd.body,f),$.forceStyles(u.iframe,t.extend(f,{width:"100%",height:"100%",top:0,left:0,position:"fixed",zIndex:1e4,border:"none"}))),u.keymap=t.extend({},i._keyboard.map),i.attachKeyboard({escape:i.exitFullscreen,right:i.next,left:i.prev}),u.crop=p.imageCrop,p.fullscreenCrop!=e&&(p.imageCrop=p.fullscreenCrop),d&&d.big&&d.image!==d.big){var m=new Galleria.Picture,b=m.isCached(d.big),_=i.getIndex(),w=i._thumbnails[_];i.trigger({type:Galleria.LOADSTART,cached:b,rewind:!1,index:_,imageTarget:i.getActiveImage(),thumbTarget:w,galleriaData:d}),m.load(d.big,function(e){i._scaleImage(e,{complete:function(e){i.trigger({type:Galleria.LOADFINISH,cached:b,index:_,rewind:!1,imageTarget:e.image,thumbTarget:w});var a=i._controls.getActive().image;a&&t(a).width(e.image.width).height(e.image.height).attr("style",t(e.image).attr("style")).attr("src",e.image.src)}})})}i.rescale(function(){i.addTimer(!1,function(){g&&$.show(i.getActiveImage()),"function"==typeof a&&a.call(i)},100),i.trigger(Galleria.FULLSCREEN_ENTER)}),g?l.resize(u.scale):$.show(i.getActiveImage())},scale:function(){i.rescale()},exit:function(t){t=u.parseCallback(t),i._options.trueFullscreen&&G.support?G.exit(t):u._exit(t)},_exit:function(t){u.active=!1;var e=!i._options.trueFullscreen||!G.support;i.$("container").removeClass("fullscreen"),e&&($.hide(i.getActiveImage()),$.revertStyles(i.get("container"),y().html,y().body),o.scrollTo(0,u.scrolled)),v&&u.iframe&&($.revertStyles(u.pd.documentElement,u.pd.body,u.iframe),u.iframe.scrolled&&o.parent.scrollTo(0,u.iframe.scrolled)),i.detachKeyboard(),i.attachKeyboard(u.keymap),i._options.imageCrop=u.crop;var a,n=i.getData().big,r=i._controls.getActive().image;!i.getData().iframe&&r&&n&&n==r.src&&o.setTimeout((a=i.getData().image,function(){r.src=a}),1),i.rescale(function(){i.addTimer(!1,function(){e&&$.show(i.getActiveImage()),"function"==typeof t&&t.call(i),l.trigger("resize")},50),i.trigger(Galleria.FULLSCREEN_EXIT)}),l.unbind("resize",u.scale)}},p=this._idle={trunk:[],bound:!1,active:!1,add:function(e,i,a,n){if(e){p.bound||p.addEvent(),e=t(e),"boolean"==typeof a&&(n=a,a={}),a=a||{};var o,r={};for(o in i)i.hasOwnProperty(o)&&(r[o]=e.css(o));e.data("idle",{from:t.extend(r,a),to:i,complete:!0,busy:!1}),n?e.css(i):p.addTimer(),p.trunk.push(e)}},remove:function(e){e=t(e),t.each(p.trunk,function(t,i){i&&i.length&&!i.not(e).length&&(e.css(e.data("idle").from),p.trunk.splice(t,1))}),p.trunk.length||(p.removeEvent(),i.clearTimer(p.timer))},addEvent:function(){p.bound=!0,i.$("container").bind("mousemove click",p.showAll),"hover"==i._options.idleMode&&i.$("container").bind("mouseleave",p.hide)},removeEvent:function(){p.bound=!1,i.$("container").bind("mousemove click",p.showAll),"hover"==i._options.idleMode&&i.$("container").unbind("mouseleave",p.hide)},addTimer:function(){"hover"!=i._options.idleMode&&i.addTimer("idle",function(){p.hide()},i._options.idleTime)},hide:function(){if(i._options.idleMode&&!1!==i.getIndex()&&!i.getData().iframe){i.trigger(Galleria.IDLE_ENTER);var e=p.trunk.length;t.each(p.trunk,function(t,a){var n=a.data("idle");n&&(a.data("idle").complete=!1,$.animate(a,n.to,{duration:i._options.idleSpeed,complete:function(){t==e-1&&(p.active=!1)}}))})}},showAll:function(){i.clearTimer("idle"),t.each(p.trunk,function(t,e){p.show(e)})},show:function(e){var a=e.data("idle");p.active&&(a.busy||a.complete)||(a.busy=!0,i.trigger(Galleria.IDLE_EXIT),i.clearTimer("idle"),$.animate(e,a.from,{duration:i._options.idleSpeed/2,complete:function(){p.active=!0,t(e).data("idle").busy=!1,t(e).data("idle").complete=!0}})),p.addTimer()}},g=this._lightbox={width:0,height:0,initialized:!1,active:null,image:null,elems:{},keymap:!1,init:function(){if(i.trigger(Galleria.LIGHTBOX_OPEN),!g.initialized){g.initialized=!0;var e={},a=i._options,n="",o="position:absolute;",r="lightbox-",s={overlay:"position:fixed;display:none;opacity:"+a.overlayOpacity+";filter:alpha(opacity="+100*a.overlayOpacity+");top:0;left:0;width:100%;height:100%;background:"+a.overlayBackground+";z-index:99990",box:"position:fixed;display:none;width:400px;height:400px;top:50%;left:50%;margin-top:-200px;margin-left:-200px;z-index:99991",shadow:o+"background:#000;width:100%;height:100%;",content:o+"background-color:#fff;top:10px;left:10px;right:10px;bottom:10px;overflow:hidden",info:o+"bottom:10px;left:10px;right:10px;color:#444;font:11px/13px arial,sans-serif;height:13px",close:o+"top:10px;right:10px;height:20px;width:20px;background:#fff;text-align:center;cursor:pointer;color:#444;font:16px/22px arial,sans-serif;z-index:99999",image:o+"top:10px;left:10px;right:10px;bottom:30px;overflow:hidden;display:block;",prevholder:o+"width:50%;top:0;bottom:40px;cursor:pointer;",nextholder:o+"width:50%;top:0;bottom:40px;right:-1px;cursor:pointer;",prev:o+"top:50%;margin-top:-20px;height:40px;width:30px;background:#fff;left:20px;display:none;text-align:center;color:#000;font:bold 16px/36px arial,sans-serif",next:o+"top:50%;margin-top:-20px;height:40px;width:30px;background:#fff;right:20px;left:auto;display:none;font:bold 16px/36px arial,sans-serif;text-align:center;color:#000",title:"float:left",counter:"float:right;margin-left:8px;"},l={};m&&m>7&&(s.nextholder+="background:#000;filter:alpha(opacity=0);",s.prevholder+="background:#000;filter:alpha(opacity=0);"),t.each(s,function(t,e){n+=".galleria-"+r+t+"{"+e+"}"}),n+=".galleria-lightbox-box.iframe .galleria-lightbox-prevholder,.galleria-lightbox-box.iframe .galleria-lightbox-nextholder{width:100px;height:100px;top:50%;margin-top:-70px}",$.insertStyleTag(n,"galleria-lightbox"),t.each("overlay box content shadow title info close prevholder prev nextholder next counter image".split(" "),function(t,a){i.addElement("lightbox-"+a),e[a]=g.elems[a]=i.get("lightbox-"+a)}),g.image=new Galleria.Picture,t.each({box:"shadow content close prevholder nextholder",info:"title counter",content:"info image",prevholder:"prev",nextholder:"next"},function(e,i){var a=[];t.each(i.split(" "),function(t,e){a.push(r+e)}),l[r+e]=a}),i.append(l),t(e.image).append(g.image.container),t(y().body).append(e.overlay,e.box),$.optimizeTouch(e.box),t(e.close).bind("click",g.hide).html("&#215;").hover(function(){t(this).css("color","#bbb")},function(){t(this).css("color","#444")}),t.each(["Prev","Next"],function(i,a){var n=t(e[a.toLowerCase()]).html(/v/.test(a)?"&#8249;&#160;":"&#160;&#8250;"),o=t(e[a.toLowerCase()+"holder"]);o.bind("click",function(){g["show"+a]()}),m<8||Galleria.TOUCH?n.show():o.hover(function(){n.show()},function(t){n.stop().fadeOut(200)})}),t(e.overlay).bind("click",g.hide),Galleria.IPAD&&(i._options.lightboxTransitionSpeed=0)}},rescale:function(e){var a=Math.min(l.width()-40,g.width),n=Math.min(l.height()-60,g.height),o=Math.min(a/g.width,n/g.height),r=Math.round(g.width*o)+40,s=Math.round(g.height*o)+60,c={width:r,height:s,"margin-top":-1*Math.ceil(s/2),"margin-left":-1*Math.ceil(r/2)};e?t(g.elems.box).css(c):t(g.elems.box).animate(c,{duration:i._options.lightboxTransitionSpeed,easing:i._options.easing,complete:function(){var e=g.image,a=i._options.lightboxFadeSpeed;i.trigger({type:Galleria.LIGHTBOX_IMAGE,imageTarget:e.image}),t(e.container).show(),t(e.image).animate({opacity:1},a),$.show(g.elems.info,a)}})},hide:function(){g.image.image=null,l.unbind("resize",g.rescale),t(g.elems.box).hide(),$.hide(g.elems.info),i.detachKeyboard(),i.attachKeyboard(g.keymap),g.keymap=!1,$.hide(g.elems.overlay,200,function(){t(this).hide().css("opacity",i._options.overlayOpacity),i.trigger(Galleria.LIGHTBOX_CLOSE)})},showNext:function(){g.show(i.getNext(g.active))},showPrev:function(){g.show(i.getPrev(g.active))},show:function(e){g.active=e="number"==typeof e?e:i.getIndex()||0,g.initialized||g.init(),g.keymap||(g.keymap=t.extend({},i._keyboard.map),i.attachKeyboard({escape:g.hide,right:g.showNext,left:g.showPrev})),l.unbind("resize",g.rescale);var a,n,r,s=i.getData(e),c=i.getDataLength(),h=i.getNext(e);$.hide(g.elems.info);try{for(r=i._options.preload;r>0;r--)n=new Galleria.Picture,a=i.getData(h),n.preload("big"in a?a.big:a.image),h=i.getNext(h)}catch(t){}g.image.isIframe=!!s.iframe,t(g.elems.box).toggleClass("iframe",!!s.iframe),g.image.load(s.iframe||s.big||s.image,function(a){if(a.isIframe){var n=t(o).width(),r=t(o).height();if(i._options.maxVideoSize){var h=Math.min(i._options.maxVideoSize/n,i._options.maxVideoSize/r);h<1&&(n*=h,r*=h)}g.width=n,g.height=r}else g.width=a.original.width,g.height=a.original.height;t(a.image).css({width:a.isIframe?"100%":"100.1%",height:a.isIframe?"100%":"100.1%",top:0,zIndex:99998,opacity:0,visibility:"visible"}),g.elems.title.innerHTML=s.title||"",g.elems.counter.innerHTML=e+1+" / "+c,l.resize(g.rescale),g.rescale()}),t(g.elems.overlay).show().css("visibility","visible"),t(g.elems.box).show()}},f=this._timer={trunk:{},add:function(t,e,i,a){if(t=t||(new Date).getTime(),a=a||!1,this.clear(t),a){var n=e;e=function(){n(),f.add(t,e,i)}}this.trunk[t]=o.setTimeout(e,i)},clear:function(t){var e,i=function(t){o.clearTimeout(this.trunk[t]),delete this.trunk[t]};if(t&&t in this.trunk)i.call(this,t);else if(void 0===t)for(e in this.trunk)this.trunk.hasOwnProperty(e)&&i.call(this,e)}};return this},Galleria.prototype={constructor:Galleria,init:function(i,a){if(a=w(a),this._original={target:i,options:a,data:null},this._target=this._dom.target=i.nodeName?i:t(i).get(0),this._original.html=this._target.innerHTML,I.push(this),this._target)return this._options={autoplay:!1,carousel:!0,carouselFollow:!0,carouselSpeed:400,carouselSteps:"auto",clicknext:!1,dailymotion:{foreground:"%23EEEEEE",highlight:"%235BCEC5",background:"%23222222",logo:0,hideInfos:1},dataConfig:function(t){return{}},dataSelector:"img",dataSort:!1,dataSource:this._target,debug:e,dummy:e,easing:"galleria",extend:function(t){},fullscreenCrop:e,fullscreenDoubleTap:!0,fullscreenTransition:e,height:0,idleMode:!0,idleTime:3e3,idleSpeed:200,imageCrop:!1,imageMargin:0,imagePan:!1,imagePanSmoothness:12,imagePosition:"50%",imageTimeout:e,initialTransition:e,keepSource:!1,layerFollow:!0,lightbox:!1,lightboxFadeSpeed:200,lightboxTransitionSpeed:200,linkSourceImages:!0,maxScaleRatio:e,maxVideoSize:e,minScaleRatio:e,overlayOpacity:.85,overlayBackground:"#0b0b0b",pauseOnInteraction:!0,popupLinks:!1,preload:2,queue:!0,responsive:!0,show:0,showInfo:!0,showCounter:!0,showImagenav:!0,swipe:!0,thumbCrop:!0,thumbEventType:"click",thumbFit:!0,thumbMargin:0,thumbQuality:"auto",thumbDisplayOrder:!0,thumbnails:!0,touchTransition:e,transition:"fade",transitionInitial:e,transitionSpeed:400,trueFullscreen:!0,useCanvas:!1,vimeo:{title:0,byline:0,portrait:0,color:"aaaaaa"},wait:5e3,width:"auto",youtube:{modestbranding:1,autohide:1,color:"white",hd:1,rel:0,showinfo:0}},this._options.initialTransition=this._options.initialTransition||this._options.transitionInitial,a&&!1===a.debug&&(h=!1),a&&"number"==typeof a.imageTimeout&&a.imageTimeout,a&&"string"==typeof a.dummy&&(u=a.dummy),t(this._target).children().hide(),Galleria.QUIRK&&Galleria.raise("Your page is in Quirks mode, Galleria may not render correctly. Please validate your HTML and add a correct doctype."),"object"==typeof Galleria.theme?this._init():E.push(this),this;Galleria.raise("Target not found",!0)},_init:function(){var e,i,a,n,s,c,h,u,d,p,g,f,y,v=this,b=this._options;if(this._initialized)return Galleria.raise("Init failed: Gallery instance already initialized."),this;if(this._initialized=!0,!Galleria.theme)return Galleria.raise("Init failed: No theme found.",!0),this;if(t.extend(!0,b,Galleria.theme.defaults,this._original.options,Galleria.configure.options),"getContext"in(e=r.createElement("canvas"))?A=A||{elem:e,context:e.getContext("2d"),cache:{},length:0}:e=null,this.bind(Galleria.DATA,function(){this._original.data=this._data,this.get("total").innerHTML=this.getDataLength();var t=this.$("container");v._options.height<2&&(v._userRatio=v._ratio=v._options.height);var e={width:0,height:0},i=function(){return v.$("stage").height()};$.wait({until:function(){return e=v._getWH(),t.width(e.width).height(e.height),i()&&e.width&&e.height>50},success:function(){v._width=e.width,v._height=e.height,v._ratio=v._ratio||e.height/e.width,Galleria.WEBKIT?o.setTimeout(function(){v._run()},1):v._run()},error:function(){i()?Galleria.raise("Could not extract sufficient width/height of the gallery container. Traced measures: width:"+e.width+"px, height: "+e.height+"px.",!0):Galleria.raise("Could not extract a stage height from the CSS. Traced height: "+i()+"px.",!0)},timeout:"number"==typeof this._options.wait&&this._options.wait})}),this.append({"info-text":["info-title","info-description"],info:["info-text"],"image-nav":["image-nav-right","image-nav-left"],stage:["images","loader","counter","image-nav"],"thumbnails-list":["thumbnails"],"thumbnails-container":["thumb-nav-left","thumbnails-list","thumb-nav-right"],container:["stage","thumbnails-container","info","tooltip"]}),$.hide(this.$("counter").append(this.get("current"),r.createTextNode(" / "),this.get("total"))),this.setCounter("&#8211;"),$.hide(v.get("tooltip")),this.$("container").addClass(Galleria.TOUCH?"touch":"notouch"),t.each(new Array(2),function(e){var i=new Galleria.Picture;t(i.container).css({position:"absolute",top:0,left:0}).prepend(v._layers[e]=t($.create("galleria-layer")).css({position:"absolute",top:0,left:0,right:0,bottom:0,zIndex:2})[0]),v.$("images").append(i.container),v._controls[e]=i}),this.$("images").css({position:"relative",top:0,left:0,width:"100%",height:"100%"}),this.$("thumbnails, thumbnails-list").css({overflow:"hidden",position:"relative"}),this.$("image-nav-right, image-nav-left").bind("click",function(t){b.clicknext&&t.stopPropagation(),b.pauseOnInteraction&&v.pause();var e=/right/.test(this.className)?"next":"prev";v[e]()}),t.each(["info","counter","image-nav"],function(t,e){!1===b["show"+e.substr(0,1).toUpperCase()+e.substr(1).replace(/-/,"")]&&$.moveOut(v.get(e.toLowerCase()))}),this.load(),b.keepSource||m||(this._target.innerHTML=""),this.get("errors")&&this.appendChild("target","errors"),this.appendChild("target","container"),b.carousel){var _=0,w=b.show;this.bind(Galleria.THUMBNAIL,function(){this.updateCarousel(),++_==this.getDataLength()&&"number"==typeof w&&w>0&&this._carousel.follow(w)})}return b.responsive&&l.bind("resize",function(){v.isFullscreen()||v.resize()}),b.swipe&&(i=v.$("images"),n=[0,0],s=[0,0],c=!1,h=0,u="touchstart",d="touchmove",p="touchend",g=function(t){return t.originalEvent.touches?t.originalEvent.touches[0]:t},f=function(t){t.originalEvent.touches&&t.originalEvent.touches.length>1||(a=g(t),s=[a.pageX,a.pageY],n[0]||(n=s),Math.abs(n[0]-s[0])>10&&t.preventDefault())},y=function(t){i.unbind(d,f),t.originalEvent.touches&&t.originalEvent.touches.length||c?c=!c:($.timestamp()-h<1e3&&Math.abs(n[0]-s[0])>30&&Math.abs(n[1]-s[1])<100&&(t.preventDefault(),v[n[0]>s[0]?"next":"prev"]()),n=s=[0,0])},i.bind(u,function(t){t.originalEvent.touches&&t.originalEvent.touches.length>1||(a=g(t),h=$.timestamp(),n=s=[a.pageX,a.pageY],i.bind(d,f).one(p,y))}),b.fullscreenDoubleTap&&this.$("stage").bind("touchstart",function(){var t,e,i,a,n,o,r=function(t){return t.originalEvent.touches?t.originalEvent.touches[0]:t};return function(s){if(o=Galleria.utils.timestamp(),e=r(s).pageX,i=r(s).pageY,o-t<500&&e-a<20&&i-n<20)return v.toggleFullscreen(),s.preventDefault(),void v.$("stage").unbind("touchend",arguments.callee);t=o,a=e,n=i}}())),$.optimizeTouch(this.get("container")),t.each(Galleria.on.binds,function(e,i){-1==t.inArray(i.hash,v._binds)&&v.bind(i.type,i.callback)}),this},addTimer:function(){return this._timer.add.apply(this._timer,$.array(arguments)),this},clearTimer:function(){return this._timer.clear.apply(this._timer,$.array(arguments)),this},_getWH:function(){var e,i=this.$("container"),a=this.$("target"),n=this,o={};return t.each(["width","height"],function(t,r){n._options[r]&&"number"==typeof n._options[r]?o[r]=n._options[r]:(e=[$.parseValue(i.css(r)),$.parseValue(a.css(r)),i[r](),a[r]()],n["_"+r]||e.splice(e.length,$.parseValue(i.css("min-"+r)),$.parseValue(a.css("min-"+r))),o[r]=Math.max.apply(Math,e))}),n._userRatio&&(o.height=o.width*n._userRatio),o},_createThumbnails:function(e){this.get("total").innerHTML=this.getDataLength();var i,a,n,s,l,c,h=this,u=this._options,d=e?this._data.length-e.length:0,p=d,g=[],f=0,y=m<8?"http://upload.wikimedia.org/wikipedia/commons/c/c0/Blank.gif":"data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw%3D%3D",v=!!(c=h.$("thumbnails").find(".active")).length&&c.find("img").attr("src"),b="string"==typeof u.thumbnails?u.thumbnails.toLowerCase():null,_=function(t){return r.defaultView&&r.defaultView.getComputedStyle?r.defaultView.getComputedStyle(a.container,null)[t]:l.css(t)},w=function(e,i,a){return function(){t(a).append(e),h.trigger({type:Galleria.THUMBNAIL,thumbTarget:e,index:i,galleriaData:h.getData(i)})}},x=function(e){u.pauseOnInteraction&&h.pause();var i=t(e.currentTarget).data("index");h.getIndex()!==i&&h.show(i),e.preventDefault()},k=function(e,i){t(e.container).css("visibility","visible"),h.trigger({type:Galleria.THUMBNAIL,thumbTarget:e.image,index:e.data.order,galleriaData:h.getData(e.data.order)}),"function"==typeof i&&i.call(h,e)},G=function(e,i){e.scale({width:e.data.width,height:e.data.height,crop:u.thumbCrop,margin:u.thumbMargin,canvas:u.useCanvas,complete:function(e){var a,n,o,r=["left","top"],s=h.getData(e.index),l=s.thumb.split(":");t.each(["Width","Height"],function(i,o){a=o.toLowerCase(),!0===u.thumbCrop&&u.thumbCrop!==a||!u.thumbFit||((n={})[a]=e[a],t(e.container).css(n),(n={})[r[i]]=0,t(e.image).css(n)),e["outer"+o]=t(e.container)["outer"+o](!0)}),$.toggleQuality(e.image,!0===u.thumbQuality||"auto"===u.thumbQuality&&e.original.width<3*e.width),s.iframe&&2==l.length&&l[0]in T?T[l[0]].getThumb(l[1],(o=e.image,function(t){o.src=t,k(e,i)})):u.thumbDisplayOrder&&!e.lazy?t.each(g,function(t,e){if(t===f&&e.ready&&!e.displayed)return f++,e.displayed=!0,void k(e,i)}):k(e,i)}})};for(e||(this._thumbnails=[],this.$("thumbnails").empty());this._data[d];d++)i=(n=this._data[d]).thumb||n.image,!0!==u.thumbnails&&"lazy"!=b||!n.thumb&&!n.image?n.iframe||"empty"===b||"numbers"===b?(a={container:$.create("galleria-image"),image:$.create("img","span"),ready:!0},"numbers"===b&&t(a.image).text(d+1),n.iframe&&t(a.image).addClass("iframe"),this.$("thumbnails").append(a.container),o.setTimeout(w(a.image,d,a.container),50+20*d)):a={container:null,image:null}:((a=new Galleria.Picture(d)).index=d,a.displayed=!1,a.lazy=!1,a.video=!1,this.$("thumbnails").append(a.container),(l=t(a.container)).css("visibility","hidden"),a.data={width:$.parseValue(_("width")),height:$.parseValue(_("height")),order:d,src:i},u.thumbFit&&!0!==u.thumbCrop?l.css({width:"auto",height:"auto"}):l.css({width:a.data.width,height:a.data.height}),2==(s=i.split(":")).length&&s[0]in T?(a.video=!0,a.ready=!0,a.load(y,{height:a.data.height,width:1.25*a.data.height},G)):"lazy"==b?(l.addClass("lazy"),a.lazy=!0,a.load(y,{height:a.data.height,width:a.data.width})):a.load(i,G),"all"===u.preload&&a.preload(n.image)),t(a.container).add(u.keepSource&&u.linkSourceImages?n.original:null).data("index",d).bind(u.thumbEventType,x).data("thumbload",G),v===i&&t(a.container).addClass("active"),this._thumbnails.push(a);return g=this._thumbnails.slice(p),this},lazyLoad:function(e,i){var a=e.constructor==Array?e:[e],n=this,o=(this.$("thumbnails").children().filter(function(){return t(this).data("lazy-src")}),0);return t.each(a,function(e,r){if(!(r>n._thumbnails.length-1)){var s=n._thumbnails[r],l=s.data,c=(l.src.split(":"),function(){++o==a.length&&"function"==typeof i&&i.call(n)}),h=t(s.container).data("thumbload");s.video?h.call(n,s,c):s.load(l.src,function(t){h.call(n,t,c)})}}),this},lazyLoadChunks:function(t,e){var i=this.getDataLength(),a=0,n=0,r=[],s=[],l=this;for(e=e||0;a<i;a++)s.push(a),++n!=t&&a!=i-1||(r.push(s),n=0,s=[]);var c=function(t){var i=r.shift();i&&o.setTimeout(function(){l.lazyLoad(i,function(){c(!0)})},e&&t?e:0)};return c(!1),this},_run:function(){var i=this;i._createThumbnails(),$.wait({timeout:1e4,until:function(){return Galleria.OPERA&&i.$("stage").css("display","inline-block"),i._stageWidth=i.$("stage").width(),i._stageHeight=i.$("stage").height(),i._stageWidth&&i._stageHeight>50},success:function(){if(C.push(i),$.show(i.get("counter")),i._options.carousel&&i._carousel.bindControls(),i._options.autoplay&&(i.pause(),"number"==typeof i._options.autoplay&&(i._playtime=i._options.autoplay),i._playing=!0),i._firstrun)return i._options.autoplay&&i.trigger(Galleria.PLAY),void("number"==typeof i._options.show&&i.show(i._options.show));i._firstrun=!0,Galleria.History&&Galleria.History.change(function(t){isNaN(t)?o.history.go(-1):i.show(t,e,!0)}),i.trigger(Galleria.READY),Galleria.theme.init.call(i,i._options),t.each(Galleria.ready.callbacks,function(t,e){"function"==typeof e&&e.call(i,i._options)}),i._options.extend.call(i,i._options),/^[0-9]{1,4}$/.test(p)&&Galleria.History?i.show(p,e,!0):i._data[i._options.show]&&i.show(i._options.show),i._options.autoplay&&i.trigger(Galleria.PLAY)},error:function(){Galleria.raise("Stage width or height is too small to show the gallery. Traced measures: width:"+i._stageWidth+"px, height: "+i._stageHeight+"px.",!0)}})},load:function(e,i,a){var n=this,o=this._options;return this._data=[],this._thumbnails=[],this.$("thumbnails").empty(),"function"==typeof i&&(a=i,i=null),e=e||o.dataSource,i=i||o.dataSelector,a=a||o.dataConfig,/^function Object/.test(e.constructor)&&(e=[e]),e.constructor===Array?this.validate(e)?this._data=e:Galleria.raise("Load failed: JSON Array not valid."):(i+=",.video,.iframe",t(e).find(i).each(function(e,i){i=t(i);var o={},r=i.parent(),s=r.attr("href"),l=r.attr("rel");s&&("IMG"==i[0].nodeName||i.hasClass("video"))&&k(s)?o.video=s:s&&i.hasClass("iframe")?o.iframe=s:o.image=o.big=s,l&&(o.big=l),t.each("big title description link layer".split(" "),function(t,e){i.data(e)&&(o[e]=i.data(e))}),n._data.push(t.extend({title:i.attr("title")||"",thumb:i.attr("src"),image:i.attr("src"),big:i.attr("src"),description:i.attr("alt")||"",link:i.attr("longdesc"),original:i.get(0)},o,a(i)))})),"function"==typeof o.dataSort?c.sort.call(this._data,o.dataSort):"random"==o.dataSort&&this._data.sort(function(){return Math.round(Math.random())-.5}),this.getDataLength()&&this._parseData().trigger(Galleria.DATA),this},_parseData:function(){var e,i=this;return t.each(this._data,function(a,n){if(e=i._data[a],"thumb"in n==!1&&(e.thumb=n.image),!1 in n&&(e.big=n.image),"video"in n){var o=k(n.video);o&&(e.iframe=T[o.provider].embed(o.id)+function(){if("object"==typeof i._options[o.provider]){var e=[];return t.each(i._options[o.provider],function(t,i){e.push(t+"="+i)}),"youtube"==o.provider&&(e=["wmode=opaque"].concat(e)),"?"+e.join("&")}return""}(),delete e.video,"thumb"in e&&e.thumb||(e.thumb=o.provider+":"+o.id))}}),this},destroy:function(){return this.$("target").data("galleria",null),this.$("container").unbind("galleria"),this.get("target").innerHTML=this._original.html,this.clearTimer(),$.removeFromArray(I,this),$.removeFromArray(C,this),this},splice:function(){var t=this,e=$.array(arguments);return o.setTimeout(function(){c.splice.apply(t._data,e),t._parseData()._createThumbnails()},2),t},push:function(){var t=this,e=$.array(arguments);return 1==e.length&&e[0].constructor==Array&&(e=e[0]),o.setTimeout(function(){c.push.apply(t._data,e),t._parseData()._createThumbnails(e)},2),t},_getActive:function(){return this._controls.getActive()},validate:function(t){return!0},bind:function(t,e){return t=x(t),this.$("container").bind(t,this.proxy(e)),this},unbind:function(t){return t=x(t),this.$("container").unbind(t),this},trigger:function(e){return e="object"==typeof e?t.extend(e,{scope:this}):{type:x(e),scope:this},this.$("container").trigger(e),this},addIdleState:function(t,e,i,a){return this._idle.add.apply(this._idle,$.array(arguments)),this},removeIdleState:function(t){return this._idle.remove.apply(this._idle,$.array(arguments)),this},enterIdleMode:function(){return this._idle.hide(),this},exitIdleMode:function(){return this._idle.showAll(),this},enterFullscreen:function(t){return this._fullscreen.enter.apply(this,$.array(arguments)),this},exitFullscreen:function(t){return this._fullscreen.exit.apply(this,$.array(arguments)),this},toggleFullscreen:function(t){return this._fullscreen[this.isFullscreen()?"exit":"enter"].apply(this,$.array(arguments)),this},bindTooltip:function(t,e){return this._tooltip.bind.apply(this._tooltip,$.array(arguments)),this},defineTooltip:function(t,e){return this._tooltip.define.apply(this._tooltip,$.array(arguments)),this},refreshTooltip:function(t){return this._tooltip.show.apply(this._tooltip,$.array(arguments)),this},openLightbox:function(){return this._lightbox.show.apply(this._lightbox,$.array(arguments)),this},closeLightbox:function(){return this._lightbox.hide.apply(this._lightbox,$.array(arguments)),this},getActiveImage:function(){return this._getActive().image||e},getActiveThumb:function(){return this._thumbnails[this._active].image||e},getMousePosition:function(t){return{x:t.pageX-this.$("container").offset().left,y:t.pageY-this.$("container").offset().top}},addPan:function(e){if(!1!==this._options.imageCrop){e=t(e||this.getActiveImage());var i=this,a=e.width()/2,n=e.height()/2,o=parseInt(e.css("left"),10),r=parseInt(e.css("top"),10),s=o||0,l=r||0,c=0,h=0,u=!1,d=$.timestamp(),p=0,g=0,f=function(t,i,a){if(t>0&&(g=Math.round(Math.max(-1*t,Math.min(0,i))),p!==g))if(p=g,8===m)e.parent()["scroll"+a](-1*g);else{var n={};n[a.toLowerCase()]=g,e.css(n)}},y=function(t){$.timestamp()-d<50||(u=!0,a=i.getMousePosition(t).x,n=i.getMousePosition(t).y)};return 8===m&&(e.parent().scrollTop(-1*l).scrollLeft(-1*s),e.css({top:0,left:0})),this.$("stage").unbind("mousemove",y).bind("mousemove",y),this.addTimer("pan"+i._id,function(t){u&&(c=e.width()-i._stageWidth,h=e.height()-i._stageHeight,o=a/i._stageWidth*c*-1,r=n/i._stageHeight*h*-1,s+=(o-s)/i._options.imagePanSmoothness,l+=(r-l)/i._options.imagePanSmoothness,f(h,l,"Top"),f(c,s,"Left"))},50,!0),this}},proxy:function(t,e){return"function"!=typeof t?g:(e=e||this,function(){return t.apply(e,$.array(arguments))})},removePan:function(){return this.$("stage").unbind("mousemove"),this.clearTimer("pan"+this._id),this},addElement:function(e){var i=this._dom;return t.each($.array(arguments),function(t,e){i[e]=$.create("galleria-"+e)}),this},attachKeyboard:function(t){return this._keyboard.attach.apply(this._keyboard,$.array(arguments)),this},detachKeyboard:function(){return this._keyboard.detach.apply(this._keyboard,$.array(arguments)),this},appendChild:function(t,e){return this.$(t).append(this.get(e)||e),this},prependChild:function(t,e){return this.$(t).prepend(this.get(e)||e),this},remove:function(t){return this.$($.array(arguments).join(",")).remove(),this},append:function(t){var e,i;for(e in t)if(t.hasOwnProperty(e))if(t[e].constructor===Array)for(i=0;t[e][i];i++)this.appendChild(e,t[e][i]);else this.appendChild(e,t[e]);return this},_scaleImage:function(e,i){if(e=e||this._controls.getActive()){var a,n=function(e){t(e.container).children(":first").css({top:Math.max(0,$.parseValue(e.image.style.top)),left:Math.max(0,$.parseValue(e.image.style.left)),width:$.parseValue(e.image.width),height:$.parseValue(e.image.height)})};return i=t.extend({width:this._stageWidth,height:this._stageHeight,crop:this._options.imageCrop,max:this._options.maxScaleRatio,min:this._options.minScaleRatio,margin:this._options.imageMargin,position:this._options.imagePosition,iframelimit:this._options.maxVideoSize},i),this._options.layerFollow&&!0!==this._options.imageCrop?"function"==typeof i.complete?(a=i.complete,i.complete=function(){a.call(e,e),n(e)}):i.complete=n:t(e.container).children(":first").css({top:0,left:0}),e.scale(i),this}},updateCarousel:function(){return this._carousel.update(),this},resize:function(i,a){"function"==typeof i&&(a=i,i=e),i=t.extend({width:0,height:0},i);var n=this,o=this.$("container");return t.each(i,function(t,e){e||(o[t]("auto"),i[t]=n._getWH()[t])}),t.each(i,function(t,e){o[t](e)}),this.rescale(a)},rescale:function(t,i,a){var n=this;"function"==typeof t&&(a=t,t=e);return function(){n._stageWidth=t||n.$("stage").width(),n._stageHeight=i||n.$("stage").height(),n._scaleImage(),n._options.carousel&&n.updateCarousel(),n.trigger(Galleria.RESCALE),"function"==typeof a&&a.call(n)}.call(n),this},refreshImage:function(){return this._scaleImage(),this._options.imagePan&&this.addPan(),this},show:function(t,e,i){if(!(this._queue.length>3||!1===t||!this._options.queue&&this._queue.stalled)){if(t=Math.max(0,Math.min(parseInt(t,10),this.getDataLength()-1)),e=void 0!==e?!!e:t<this.getIndex(),(i=i||!1)||!Galleria.History)return this._active=t,c.push.call(this._queue,{index:t,rewind:e}),this._queue.stalled||this._show(),this;Galleria.History.set(t.toString())}},_show:function(){var i=this,a=this._queue[0],n=this.getData(a.index);if(n){var r=n.iframe||(this.isFullscreen()&&"big"in n?n.big:n.image),s=this._controls.getActive(),l=this._controls.getNext(),h=l.isCached(r),u=this._thumbnails[a.index],d=function(){t(l.image).trigger("mouseup")},p=function(e,a,n,r,s){return function(){D.active=!1,$.toggleQuality(a.image,i._options.imageQuality),i._layers[i._controls.active].innerHTML="",t(n.container).css({zIndex:0,opacity:0}).show(),n.isIframe&&t(n.container).find("iframe").remove(),i.$("container").toggleClass("iframe",!!e.iframe),t(a.container).css({zIndex:1,left:0,top:0}).show(),i._controls.swap(),i._options.imagePan&&i.addPan(a.image),(e.link||i._options.lightbox||i._options.clicknext)&&t(a.image).css({cursor:"pointer"}).bind("mouseup",function(t){if(!("number"==typeof t.which&&t.which>1))return i._options.clicknext&&!Galleria.TOUCH?(i._options.pauseOnInteraction&&i.pause(),void i.next()):void(e.link?i._options.popupLinks?o.open(e.link,"_blank"):o.location.href=e.link:i._options.lightbox&&i.openLightbox())}),i._playCheck(),i.trigger({type:Galleria.IMAGE,index:r.index,imageTarget:a.image,thumbTarget:s.image,galleriaData:e}),c.shift.call(i._queue),i._queue.stalled=!1,i._queue.length&&i._show()}}(n,l,s,a,u);if(this._options.carousel&&this._options.carouselFollow&&this._carousel.follow(a.index),this._options.preload){var g,f,m,y=this.getNext();try{for(f=this._options.preload;f>0;f--)g=new Galleria.Picture,m=i.getData(y),g.preload(this.isFullscreen()&&"big"in m?m.big:m.image),y=i.getNext(y)}catch(t){}}$.show(l.container),l.isIframe=!!n.iframe,t(i._thumbnails[a.index].container).addClass("active").siblings(".active").removeClass("active"),i.trigger({type:Galleria.LOADSTART,cached:h,index:a.index,rewind:a.rewind,imageTarget:l.image,thumbTarget:u.image,galleriaData:n}),i._queue.stalled=!0,l.load(r,function(o){var r=t(i._layers[1-i._controls.active]).html(n.layer||"").hide();i._scaleImage(o,{complete:function(o){"image"in s&&$.toggleQuality(s.image,!1),$.toggleQuality(o.image,!1),i.removePan(),i.setInfo(a.index),i.setCounter(a.index),n.layer&&(r.show(),(n.link||i._options.lightbox||i._options.clicknext)&&r.css("cursor","pointer").unbind("mouseup").mouseup(d));var l=i._options.transition;if(t.each({initial:null===s.image,touch:Galleria.TOUCH,fullscreen:i.isFullscreen()},function(t,a){if(a&&i._options[t+"Transition"]!==e)return l=i._options[t+"Transition"],!1}),l in D.effects==!1)p();else{var c={prev:s.container,next:o.container,rewind:a.rewind,speed:i._options.transitionSpeed||400};D.active=!0,D.init.call(i,l,c,p)}i.trigger({type:Galleria.LOADFINISH,cached:h,index:a.index,rewind:a.rewind,imageTarget:o.image,thumbTarget:i._thumbnails[a.index].image,galleriaData:i.getData(a.index)})}})})}},getNext:function(t){return(t="number"==typeof t?t:this.getIndex())===this.getDataLength()-1?0:t+1},getPrev:function(t){return 0===(t="number"==typeof t?t:this.getIndex())?this.getDataLength()-1:t-1},next:function(){return this.getDataLength()>1&&this.show(this.getNext(),!1),this},prev:function(){return this.getDataLength()>1&&this.show(this.getPrev(),!0),this},get:function(t){return t in this._dom?this._dom[t]:null},getData:function(t){return t in this._data?this._data[t]:this._data[this._active]},getDataLength:function(){return this._data.length},getIndex:function(){return"number"==typeof this._active&&this._active},getStageHeight:function(){return this._stageHeight},getStageWidth:function(){return this._stageWidth},getOptions:function(t){return void 0===t?this._options:this._options[t]},setOptions:function(e,i){return"object"==typeof e?t.extend(this._options,e):this._options[e]=i,this},play:function(t){return this._playing=!0,this._playtime=t||this._playtime,this._playCheck(),this.trigger(Galleria.PLAY),this},pause:function(){return this._playing=!1,this.trigger(Galleria.PAUSE),this},playToggle:function(t){return this._playing?this.pause():this.play(t)},isPlaying:function(){return this._playing},isFullscreen:function(){return this._fullscreen.active},_playCheck:function(){var t=this,e=0,i=$.timestamp(),a="play"+this._id;if(this._playing){this.clearTimer(a);var n=function(){if((e=$.timestamp()-i)>=t._playtime&&t._playing)return t.clearTimer(a),void t.next();t._playing&&(t.trigger({type:Galleria.PROGRESS,percent:Math.ceil(e/t._playtime*100),seconds:Math.floor(e/1e3),milliseconds:e}),t.addTimer(a,n,20))};t.addTimer(a,n,20)}},setPlaytime:function(t){return this._playtime=t,this},setIndex:function(t){return this._active=t,this},setCounter:function(t){if("number"==typeof t?t++:void 0===t&&(t=this.getIndex()+1),this.get("current").innerHTML=t,m){var e=this.$("counter"),i=e.css("opacity");1===parseInt(i,10)?$.removeAlpha(e[0]):this.$("counter").css("opacity",i)}return this},setInfo:function(e){var i=this,a=this.getData(e);return t.each(["title","description"],function(t,e){var n=i.$("info-"+e);a[e]?n[a[e].length?"show":"hide"]().html(a[e]):n.empty().hide()}),this},hasInfo:function(t){var e,i="title description".split(" ");for(e=0;i[e];e++)if(this.getData(t)[i[e]])return!0;return!1},jQuery:function(e){var i=this,a=[];t.each(e.split(","),function(e,n){n=t.trim(n),i.get(n)&&a.push(n)});var n=t(i.get(a.shift()));return t.each(a,function(t,e){n=n.add(i.get(e))}),n},$:function(t){return this.jQuery.apply(this,$.array(arguments))}},t.each(_,function(t,e){var i=/_/.test(e)?e.replace(/_/g,""):e;Galleria[e.toUpperCase()]="galleria."+i}),t.extend(Galleria,{IE9:9===m,IE8:8===m,IE7:7===m,IE6:6===m,IE:m,WEBKIT:/webkit/.test(d),CHROME:/chrome/.test(d),SAFARI:/safari/.test(d)&&!/chrome/.test(d),QUIRK:m&&r.compatMode&&"BackCompat"===r.compatMode,MAC:/mac/.test(navigator.platform.toLowerCase()),OPERA:!!o.opera,IPHONE:/iphone/.test(d),IPAD:/ipad/.test(d),ANDROID:/android/.test(d),TOUCH:"ontouchstart"in r}),Galleria.addTheme=function(e){e.name||Galleria.raise("No theme name specified"),"object"!=typeof e.defaults?e.defaults={}:e.defaults=w(e.defaults);var i=!1;return"string"==typeof e.css?(t("link").each(function(t,a){if(new RegExp(e.css).test(a.href))return i=!0,M(e),!1}),i||t("script").each(function(t,a){new RegExp("galleria\\."+e.name.toLowerCase()+"\\.").test(a.src)&&(i=a.src.replace(/[^\/]*$/,"")+e.css,o.setTimeout(function(){$.loadCSS(i,"galleria-theme",function(){M(e)})},1))}),i||Galleria.raise("No theme CSS loaded")):M(e),e},Galleria.loadTheme=function(e,i){if(!t("script").filter(function(){return t(this).attr("src")==e}).length){var a,n=!1;return t(o).on("load",function(){n||(a=o.setTimeout(function(){n||Galleria.theme||Galleria.raise("Galleria had problems loading theme at "+e+". Please check theme path or load manually.",!0)},2e4))}),Galleria.unloadTheme(),$.loadScript(e,function(){n=!0,o.clearTimeout(a)}),Galleria}},Galleria.unloadTheme=function(){return"object"==typeof Galleria.theme&&(t("script").each(function(e,i){new RegExp("galleria\\."+Galleria.theme.name+"\\.").test(i.src)&&t(i).remove()}),Galleria.theme=e),Galleria},Galleria.get=function(t){return I[t]?I[t]:"number"!=typeof t?I:void Galleria.raise("Gallery index "+t+" not found")},Galleria.configure=function(e,i){var a={};return"string"==typeof e&&i?(a[e]=i,e=a):t.extend(a,e),Galleria.configure.options=a,t.each(Galleria.get(),function(t,e){e.setOptions(a)}),Galleria},Galleria.configure.options={},Galleria.on=function(e,i){if(e){var a=e+(i=i||g).toString().replace(/\s/g,"")+$.timestamp();return t.each(Galleria.get(),function(t,n){n._binds.push(a),n.bind(e,i)}),Galleria.on.binds.push({type:e,callback:i,hash:a}),Galleria}},Galleria.on.binds=[],Galleria.run=function(e,i){return t.isFunction(i)&&(i={extend:i}),t(e||"#galleria").galleria(i),Galleria},Galleria.addTransition=function(t,e){return D.effects[t]=e,Galleria},Galleria.utils=$,Galleria.log=function(){var e=$.array(arguments);if(!("console"in o&&"log"in o.console))return o.alert(e.join("<br>"));try{return o.console.log.apply(o.console,e)}catch(i){t.each(e,function(){o.console.log(this)})}},Galleria.ready=function(e){return"function"!=typeof e?Galleria:(t.each(C,function(t,i){e.call(i,i._options)}),Galleria.ready.callbacks.push(e),Galleria)},Galleria.ready.callbacks=[],Galleria.raise=function(e,i){var a=i?"Fatal error":"Error",n={color:"#fff",position:"absolute",top:0,left:0,zIndex:1e5},o=function(e){var o='<div style="padding:4px;margin:0 0 2px;background:#'+(i?"811":"222")+';">'+(i?"<strong>"+a+": </strong>":"")+e+"</div>";t.each(I,function(){var t=this.$("errors"),e=this.$("target");t.length||(e.css("position","relative"),t=this.addElement("errors").appendChild("target","errors").$("errors").css(n)),t.append(o)}),I.length||t("<div>").css(t.extend(n,{position:"fixed"})).append(o).appendTo(y().body)};if(h){if(o(e),i)throw new Error(a+": "+e)}else if(i){if(S)return;S=!0,i=!1,o("Gallery could not load.")}},Galleria.version=1.29,Galleria.requires=function(t,e){return e=e||"You need to upgrade Galleria to version "+t+" to use one or more components.",Galleria.version<t&&Galleria.raise(e,!0),Galleria},Galleria.Picture=function(e){this.id=e||null,this.image=null,this.container=$.create("galleria-image"),t(this.container).css({overflow:"hidden",position:"relative"}),this.original={width:0,height:0},this.ready=!1,this.isIframe=!1},Galleria.Picture.prototype={cache:{},show:function(){$.show(this.image)},hide:function(){$.moveOut(this.image)},clear:function(){this.image=null},isCached:function(t){return!!this.cache[t]},preload:function(e){t(new Image).on("load",function(t,e){return function(){e[t]=t}}(e,this.cache)).attr("src",e)},load:function(e,i,a){if("function"==typeof i&&(a=i,i=null),this.isIframe){var n="if"+(new Date).getTime();return this.image=t("<iframe>",{src:e,frameborder:0,id:n,allowfullscreen:!0,css:{visibility:"hidden"}})[0],t(this.container).find("iframe,img").remove(),this.container.appendChild(this.image),t("#"+n).on("load",function(e,i){return function(){o.setTimeout(function(){t(e.image).css("visibility","visible"),"function"==typeof i&&i.call(e,e)},10)}}(this,a)),this.container}this.image=new Image,Galleria.IE8&&t(this.image).css("filter","inherit");var r=!1,s=!1,l=t(this.container),c=t(this.image),h=function(e,a,n){return function(){var r,l=function(){t(this).unbind("load"),e.original=i||{height:this.height,width:this.width},e.container.appendChild(this),e.cache[n]=n,"function"==typeof a&&o.setTimeout(function(){a.call(e,e)},1)};this.width&&this.height?l.call(this):o.setTimeout((r=this,function(){r.width&&r.height?l.call(r):s?Galleria.raise("Could not extract width/height from image: "+r.src+". Traced measures: width:"+r.width+"px, height: "+r.height+"px."):(t(new Image).on("load",h.attr("src",r.src)),s=!0)}),2)}}(this,a,e);return l.find("iframe,img").remove(),c.css("display","block"),$.hide(this.image),t.each("minWidth minHeight maxWidth maxHeight".split(" "),function(t,e){c.css(e,/min/.test(e)?"0":"none")}),c.on("load",h).on("error",function(){r?u?t(this).attr("src",u):Galleria.raise("Image not found: "+e):(r=!0,o.setTimeout(function(t,e){return function(){t.attr("src",e+"?"+$.timestamp())}}(t(this),e),50))}).attr("src",e),this.container},scale:function(i){var a=this;if(i=t.extend({width:0,height:0,min:e,max:e,margin:0,complete:g,position:"center",crop:!1,canvas:!1,iframelimit:e},i),this.isIframe){var n,o,r=i.width,s=i.height;if(i.iframelimit){var l=Math.min(i.iframelimit/r,i.iframelimit/s);l<1?(n=r*l,o=s*l,t(this.image).css({top:s/2-o/2,left:r/2-n/2,position:"absolute"})):t(this.image).css({top:0,left:0})}t(this.image).width(n||r).height(o||s).removeAttr("width").removeAttr("height"),t(this.container).width(r).height(s),i.complete.call(a,a);try{this.image.contentWindow&&t(this.image.contentWindow).trigger("resize")}catch(t){}return this.container}if(!this.image)return this.container;var c,h,u,d=t(a.container);return $.wait({until:function(){return c=i.width||d.width()||$.parseValue(d.css("width")),h=i.height||d.height()||$.parseValue(d.css("height")),c&&h},success:function(){var e=(c-2*i.margin)/a.original.width,n=(h-2*i.margin)/a.original.height,o=Math.min(e,n),r=Math.max(e,n),s={true:r,width:e,height:n,false:o,landscape:a.original.width>a.original.height?r:o,portrait:a.original.width<a.original.height?r:o}[i.crop.toString()],l="";i.max&&(s=Math.min(i.max,s)),i.min&&(s=Math.max(i.min,s)),t.each(["width","height"],function(e,i){t(a.image)[i](a[i]=a.image[i]=Math.round(a.original[i]*s))}),t(a.container).width(c).height(h),i.canvas&&A&&(A.elem.width=a.width,A.elem.height=a.height,l=a.image.src+":"+a.width+"x"+a.height,a.image.src=A.cache[l]||function(t){A.context.drawImage(a.image,0,0,a.original.width*s,a.original.height*s);try{return u=A.elem.toDataURL(),A.length+=u.length,A.cache[t]=u,u}catch(t){return a.image.src}}(l));var d={},p={},g=function(e,i,n){var o=0;if(/\%/.test(e)){var r=parseInt(e,10)/100,s=a.image[i]||t(a.image)[i]();o=Math.ceil(-1*s*r+n*r)}else o=$.parseValue(e);return o},f={top:{top:0},left:{left:0},right:{left:"100%"},bottom:{top:"100%"}};t.each(i.position.toLowerCase().split(" "),function(t,e){"center"===e&&(e="50%"),d[t?"top":"left"]=e}),t.each(d,function(e,i){f.hasOwnProperty(i)&&t.extend(p,f[i])}),d=d.top?t.extend(d,p):p,d=t.extend({top:"50%",left:"50%"},d),t(a.image).css({position:"absolute",top:g(d.top,"height",h),left:g(d.left,"width",c)}),a.show(),a.ready=!0,i.complete.call(a,a)},error:function(){Galleria.raise("Could not scale image: "+a.image.src)},timeout:1e3}),this}},t.extend(t.easing,{galleria:function(t,e,i,a,n){return(e/=n/2)<1?a/2*e*e*e+i:a/2*((e-=2)*e*e+2)+i},galleriaIn:function(t,e,i,a,n){return a*(e/=n)*e+i},galleriaOut:function(t,e,i,a,n){return-a*(e/=n)*(e-2)+i}}),t.fn.galleria=function(e){var i=this.selector;return t(this).length?this.each(function(){t.data(this,"galleria")&&(t.data(this,"galleria").destroy(),t(this).find("*").hide()),t.data(this,"galleria",(new Galleria).init(this,e))}):(t(function(){t(i).length?t(i).galleria(e):Galleria.utils.wait({until:function(){return t(i).length},success:function(){t(i).galleria(e)},error:function(){Galleria.raise('Init failed: Galleria could not find the element "'+i+'".')},timeout:5e3})}),this)}}(jQuery);